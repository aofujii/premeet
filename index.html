<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PreMeet â€“ Meeting Preshow</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="referrer" content="no-referrer" />
  <style>
    :root {
      --bg: #0b0f14;
      --bg-soft: #0e131a;
      --fg: #e5e7eb;
      --muted: #9aa3af;
      --card: #111827;
      --border: #1f2937;
      --primary: #6d5ef5;
      --accent: #22c55e;
      --shadow: 0 10px 25px rgba(0,0,0,.35);
      --radius: 16px;
    }
    [data-theme="light"] {
      --bg:#f5f7fb; --bg-soft:#eef2f7; --fg:#0f172a; --muted:#5b6778;
      --card:#ffffff; --border:#e5e7eb; --primary:#4f46e5; --accent:#16a34a;
      --shadow: 0 8px 20px rgba(9,11,18,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Noto Sans JP",Arial,sans-serif}
    a{color:var(--primary);text-decoration:none}
    .container{max-width:1200px;margin:0 auto;padding:16px}
    header.hero{
      background: radial-gradient(1200px 300px at 20% -20%, rgba(109,94,245,.35), transparent 60%),
                  radial-gradient(1200px 300px at 80% -20%, rgba(34,197,94,.2), transparent 60%);
      border-bottom:1px solid var(--border);
    }
    .hero-inner{display:flex;justify-content:space-between;align-items:center;gap:16px;padding:18px 16px}
    .brand{display:flex;align-items:center;gap:14px}
    .brand img{width:40px;height:40px;border-radius:12px;object-fit:contain;background:#0000}
    .title{margin:0;font-weight:900;letter-spacing:.2px;font-size:clamp(22px,4.5vw,44px)}
    .subtitle{margin:2px 0 0;color:var(--muted);font-size:clamp(12px,1.8vw,16px)}
    .toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .btn{background:linear-gradient(to bottom,var(--card),var(--bg-soft));border:1px solid var(--border);color:var(--fg);
         padding:9px 12px;border-radius:12px;cursor:pointer;font-weight:700;box-shadow:var(--shadow);}
    .btn:active{transform:translateY(1px)}
    .ghost{background:transparent}
    .primary{background:linear-gradient(180deg, var(--primary), #3d35d6); border-color:#3d35d6}
    .accent{background:linear-gradient(180deg, var(--accent), #128740); border-color:#128740}
    .tiny{padding:6px 10px;font-size:13px;border-radius:10px}
    .icon{opacity:.9;margin-right:6px}
    .switch{display:inline-flex;align-items:center;gap:8px;color:var(--muted)}
    .switch input{accent-color:var(--primary)}

    main.layout{padding:20px}
    .grid{display:grid;grid-template-columns:1.25fr 1fr;gap:18px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
    h2{margin:4px 0 12px 0;font-size:18px}
    .timer{font-variant-numeric:tabular-nums;letter-spacing:.02em;font-weight:900;font-size:clamp(22px,3.6vw,40px)}
    .when{color:var(--muted);font-size:14px;margin-top:6px}
    ul{margin:8px 0 0 20px;padding:0}
    li{margin:6px 0}
    .badges{display:flex;flex-wrap:wrap;gap:6px}
    .badge{background:linear-gradient(180deg, #1b2330, #0f172a);border:1px solid var(--border);color:var(--fg);
           padding:6px 10px;border-radius:999px;font-size:12px}
    .role-Host{background:linear-gradient(180deg,#5b6cf5,#3d35d6);border-color:#3d35d6}
    .role-Presenter{background:linear-gradient(180deg,#0ea5e9,#0369a1);border-color:#0369a1}
    .progress{height:8px;background:var(--bg-soft);border:1px solid var(--border);border-radius:999px;overflow:hidden}
    .progress > i{display:block;height:100%;background:var(--primary);width:0%}
    .controls{display:flex;gap:8px;flex-wrap:wrap}
    .yt-wrap{position:relative;width:100%;aspect-ratio:16/9;border-radius:12px;overflow:hidden;border:1px solid var(--border);background:#0f172a}
    .yt-wrap iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    .qr-wrap{display:flex;align-items:center;gap:12px}
    .qr-img{width:156px;height:156px;border-radius:10px;border:1px solid var(--border);background:#0f172a;object-fit:contain}

    /* Editor */
    .editor-page .container{max-width:1280px}
    .editor-grid{display:grid;grid-template-columns:1fr 1.2fr;gap:20px}
    .section{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
    .section h3{margin:0;padding:14px 16px;border-bottom:1px solid var(--border);font-size:16px}
    .section .body{padding:14px 16px}
    .field{margin:12px 0}
    .field label{display:block;font-weight:800;margin-bottom:6px}
    .field input[type="text"],
    .field input[type="datetime-local"],
    .field input[type="color"],
    .field textarea,
    .field select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:var(--bg-soft);color:var(--fg)}
    .row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .list{display:flex;flex-direction:column;gap:8px}
    .list-item{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;background:var(--bg-soft);border:1px solid var(--border);border-radius:12px;padding:10px}
    .list-item .actions{display:flex;gap:6px}
    .pill{background:var(--bg-soft);border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:12px;color:var(--muted)}

    @media (max-width: 1024px) {
      .grid{grid-template-columns:1fr}
      .editor-grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body data-theme="dark">
  <header class="hero">
    <div class="container hero-inner">
      <div class="brand">
        <img id="logo" alt="logo" />
        <div>
          <h1 class="title" id="pageTitle">PreMeet</h1>
          <p class="subtitle">Meeting preshow screen</p>
        </div>
      </div>
      <div class="toolbar">
        <button class="btn ghost tiny" id="themeBtn">ğŸŒ— ãƒ†ãƒ¼ãƒ</button>
        <button class="btn ghost tiny" id="fontMinus">Aâˆ’</button>
        <button class="btn ghost tiny" id="fontPlus">Aï¼‹</button>
        <button class="btn accent" id="editBtn"><span class="icon">âœï¸</span>ç·¨é›†</button>
        <button class="btn primary" id="fsBtn">â›¶ å…¨ç”»é¢</button>
      </div>
    </div>
  </header>

  <main class="layout container" id="displayPage" hidden>
    <div class="grid">
      <div class="card" id="leftCard">
        <div class="row" style="justify-content:space-between;align-items:center">
          <h2 style="margin:0">ã‚¿ã‚¤ãƒãƒ¼</h2>
          <span class="pill" id="meetingTitlePill"></span>
        </div>
        <div class="timer" id="timerText">--:--</div>
        <div class="when" id="when"></div>
        <div class="field" style="margin-top:14px">
          <div class="progress"><i id="prog"></i></div>
        </div>

        <h2>ã‚¢ã‚¸ã‚§ãƒ³ãƒ€</h2>
        <ol id="agendaList" style="margin-left:20px;padding-left:6px"></ol>
        <div class="controls" style="margin-top:8px">
          <button class="btn tiny" id="prevAgenda">â—€ å‰ã¸</button>
          <button class="btn tiny" id="nextAgenda">æ¬¡ã¸ â–¶</button>
          <button class="btn tiny" id="resetAgenda">ãƒªã‚»ãƒƒãƒˆ</button>
        </div>
      </div>

      <div class="card">
        <h2>å‚åŠ è€…</h2>
        <div class="badges" id="participants"></div>
        <h2 style="margin-top:14px">æ³¨æ„äº‹é …</h2>
        <ul id="notices"></ul>

        <div id="qrSection" style="margin-top:14px;display:none">
          <h2>QRã‚³ãƒ¼ãƒ‰</h2>
          <div class="qr-wrap">
            <img class="qr-img" id="qrImg" alt="QR">
            <div class="muted" id="qrUrl"></div>
          </div>
        </div>

        <div id="ytSection" style="margin-top:14px;display:none">
          <h2>YouTube</h2>
          <div class="yt-wrap"><iframe id="ytFrame" title="YouTube"></iframe></div>
        </div>
      </div>
    </div>
  </main>

  <!-- Editor page -->
  <main class="editor-page container" id="editorPage" hidden>
    <div class="editor-grid">
      <div class="section">
        <h3>åŸºæœ¬æƒ…å ±</h3>
        <div class="body">
          <div class="field"><label>ã‚¿ã‚¤ãƒˆãƒ«</label><input type="text" id="fTitle" placeholder="ä¼šè­°ã‚¿ã‚¤ãƒˆãƒ«" /></div>
          <div class="field"><label>ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«</label><input type="text" id="fSubtitle" placeholder="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«" /></div>
          <div class="field row">
            <div style="flex:1"><label>é–‹å§‹æ—¥æ™‚</label><input type="datetime-local" id="fStart"/></div>
            <div style="flex:1"><label>ã‚¿ã‚¤ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰</label>
              <select id="fMode">
                <option value="toStart">é–‹å§‹æ™‚åˆ»ã¾ã§</option>
                <option value="manualDown">æ‰‹å‹•ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³</option>
                <option value="elapsed">çµŒéã‚¿ã‚¤ãƒãƒ¼</option>
              </select>
            </div>
          </div>
          <div class="field row">
            <div style="flex:1"><label>æ‰‹å‹•ã‚«ã‚¦ãƒ³ãƒˆï¼ˆç§’ï¼‰</label><input type="text" id="fManual" placeholder="ä¾‹: 300"/></div>
            <div style="flex:1"><label>ãƒ­ã‚´URLï¼ˆä»»æ„ï¼‰</label><input type="text" id="fLogo" placeholder="https://..."/></div>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>ã‚¢ã‚¸ã‚§ãƒ³ãƒ€</h3>
        <div class="body">
          <div class="list" id="agendaItems"></div>
          <div class="row" style="margin-top:8px">
            <input type="text" id="agendaText" placeholder="é …ç›®åï¼ˆEnterã§è¿½åŠ ï¼‰" style="flex:2">
            <input type="text" id="agendaDur" placeholder="åˆ†" style="width:90px">
            <button class="btn tiny" id="agendaAdd">è¿½åŠ </button>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>å‚åŠ è€…</h3>
        <div class="body">
          <div class="list" id="partItems"></div>
          <div class="row" style="margin-top:8px">
            <input type="text" id="partName" placeholder="ãŠåå‰" style="flex:2">
            <input type="text" id="partRole" placeholder="å½¹å‰² (ä¾‹: Host)" style="flex:1">
            <button class="btn tiny" id="partAdd">è¿½åŠ </button>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>æ³¨æ„äº‹é … / QR / YouTube</h3>
        <div class="body">
          <div class="field">
            <label>æ³¨æ„äº‹é …ï¼ˆ1è¡Œ1é …ç›®ï¼‰</label>
            <textarea rows="4" id="fNotices"></textarea>
          </div>
          <div class="row">
            <label class="switch"><input type="checkbox" id="fQrEnabled"> QRè¡¨ç¤º</label>
            <input type="text" id="fQrUrl" placeholder="QRã«ã™ã‚‹URL" style="flex:1">
            <input type="text" id="fQrSize" placeholder="ã‚µã‚¤ã‚º" style="width:90px">
            <input type="text" id="fQrMargin" placeholder="ä½™ç™½" style="width:90px">
          </div>
          <hr style="border:none;border-top:1px solid var(--border);margin:14px 0">
          <div class="row">
            <label class="switch"><input type="checkbox" id="fYtEnabled"> YouTube</label>
            <input type="text" id="fYtUrl" placeholder="https://youtu.be/..." style="flex:1">
            <input type="text" id="fYtStart" placeholder="é–‹å§‹ç§’" style="width:100px">
            <label class="switch"><input type="checkbox" id="fYtMute" checked> ãƒŸãƒ¥ãƒ¼ãƒˆ</label>
            <label class="switch"><input type="checkbox" id="fYtLoop"> ãƒ«ãƒ¼ãƒ—</label>
            <label class="switch"><input type="checkbox" id="fYtControls" checked> ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</label>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>å¤–è¦³</h3>
        <div class="body row">
          <div style="flex:1" class="field"><label>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè‰²</label><input type="color" id="fAccent" value="#22c55e"></div>
          <div style="flex:1" class="field"><label>ãƒ¡ã‚¤ãƒ³è‰²</label><input type="color" id="fPrimary" value="#6d5ef5"></div>
          <div style="flex:1" class="field"><label>ãƒ•ã‚©ãƒ³ãƒˆå€ç‡</label><input type="text" id="fScale" placeholder="1.0"></div>
        </div>
        <div class="body">
          <div class="row">
            <button class="btn tiny" id="exportBtn">JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
            <input type="file" id="importFile" accept="application/json">
            <span class="muted">ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½ã¯å¾Œæ—¥ã‚¿ãƒ–åŒ–å¯èƒ½</span>
          </div>
        </div>
      </div>

      <div class="section" style="grid-column:1/-1">
        <h3>ãƒ©ã‚¤ãƒ–ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
        <div class="body">
          <div id="livePreview" style="border:1px dashed var(--border);border-radius:12px;overflow:hidden">
            <!-- Rendered display will be injected here -->
          </div>
        </div>
      </div>
    </div>

    <div class="row" style="justify-content:flex-end;margin:18px 0">
      <button class="btn accent" id="goDisplay">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¸</button>
      <button class="btn primary" id="startManual">æ‰‹å‹•ã‚«ã‚¦ãƒ³ãƒˆé–‹å§‹</button>
    </div>
  </main>

  <script src="./app.js" defer></script>
</body>
</html>
